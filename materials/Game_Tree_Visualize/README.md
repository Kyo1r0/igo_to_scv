# ゲーム木 可視化ツール 
## 概要
このツールは、囲碁の特定の局面（CSVファイル形式）を入力として受け取り、その局面から進行する可能性のある手の分岐を**ゲーム木（Game Tree）**として可視化し、画像ファイル（PNG）として出力するPythonスクリプトです。

組合せゲーム理論に基づいた分析の第一歩として、複雑な手の「読み」を視覚的に把握することを目的としています。


### 追記
csvのルールに従って
置けないところは置かないようにするのと、黒先手と白先手の場合を両方とも乗せるようにする
### 主な特徴:

各ノード（局面）を、テキストではなくグラフィカルな盤面画像で表示

どちらの手番かを示すインジケーターを各盤面画像に表示

その局面に至った直前の着手を赤い枠で強調表示し、手の流れを追いやすくする

## 必要なもの（インストール）
このツールを実行するには、以下の3つの要素が必要です。

- Python 3:
Python本体。インストールされていない場合は、公式サイトからダウンロードしてください。

- Pythonライブラリ (Pillow, graphviz):
画像処理とグラフ描画のために、2つのPythonライブラリが必要です。コマンドプロンプトやPowerShellで以下のコマンドを実行してインストールしてください。

```
pip install Pillow graphviz
```

- Graphviz ソフトウェア本体:
Pythonライブラリが内部で呼び出すための描画エンジンです。

公式サイトのダウンロードページにアクセスします。

"Stable Windows install packages" から最新のインストーラー（.exeファイル）をダウンロードし、実行します。

重要: インストール中に表示される**「Add Graphviz to the system PATH」**のオプションに必ずチェックを入れてください。これにより、プログラムがGraphvizを呼び出せるようになります。

## 使い方
入力CSVファイルの準備:
分析したい囲碁の局面をCSVファイルとして準備します。黒石を1、白石を-1、空点を0として表現してください。（例: board_yose.csv）

スクリプトの設定変更:
game_tree_visualizer.py ファイルをテキストエディタで開き、main関数の中にある以下の設定項目を必要に応じて変更します。

###  --- 設定項目 ---
CSV_FILE_PATH = 'board_yose.csv'  # 入力するCSVファイルのパス
MAX_DEPTH = 3                     # 何手先まで読み進めるか
OUTPUT_IMAGE_PATH = 'game_tree'   # 出力する画像ファイル名
NODE_IMAGE_DIR = 'game_tree_nodes' # ノード画像を保存するディレクトリ

- 実行:
コマンドプロンプトやPowerShellで、ファイルがあるディレクトリに移動し、以下のコマンドでスクリプトを実行します。

python game_tree_visualizer.py

- 結果の確認:

実行したディレクトリに game_tree_nodes フォルダが作成され、中に各局面の盤面画像が保存されます。

最終的な出力として game_tree.png という画像ファイルが生成され、自動的にビューアで開かれます。

## コードの説明大枠
このプログラムは、主に以下のクラスと関数から構成されています。

- GameState クラス:
一つの囲碁の局面を表すオブジェクトです。盤面データ（タプルのタプル）、現在の手番（黒:1, 白:-1）、そしてその局面に至った直前の着手座標（last_move）を情報として保持します。また、現在の局面から着手可能な全ての手を生成する generate_moves メソッドを持っています。

- create_node_image() 関数:
GameStateオブジェクトを受け取り、Pillowライブラリを使ってその盤面を表現する小さなPNG画像を生成します。格子線、石、手番インジケーター、着手強調の枠の描画はこの関数が担当します。

- build_tree() 関数:
開始局面から再帰的にgenerate_movesを呼び出し、指定された深さ（MAX_DEPTH）までの全ての局面を探索して、ゲーム木のデータ構造をメモリ上に構築します。

- visualize_tree() 関数:
build_tree()で構築されたゲーム木をたどりながら、各局面の画像をcreate_node_image()で生成し、それらをGraphvizライブラリに「ノード」と「エッジ（矢印）」として登録していく関数です。

- main() 関数:
プログラム全体のエントリーポイントです。CSVファイルの読み込み、各種設定の管理、そしてbuild_tree()とvisualize_tree()を順番に呼び出して、最終的な画像を生成・保存する役割を担います。